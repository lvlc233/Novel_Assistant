# 优化日志：文档/文件夹创建体验优化

**时间**: 2026-01-31 00:37
**目标**: 实现类似操作系统的文件创建体验——创建新卷或章节后，自动进入重命名状态（全选默认名称），若用户点击其他区域或未修改，则保留默认名称。
**变更范围**:
1.  `src/components/novel-detail/NovelDirectory.tsx`:
    -   更新 `NovelDirectoryProps` 接口，使 `onCreateVolume` 和 `onCreateChapter` 返回 Promise，包含新创建项的 `id` 和 `title`。
    -   在所有触发创建的 UI 交互（头部按钮、右键菜单、空状态按钮）中，改为 `async/await` 调用，并在创建成功后立即调用 `startEditing(id, title)` 进入编辑模式。
    -   输入框增加 `onFocus={(e) => e.target.select()}`，确保进入编辑模式时自动全选文本。
    -   优化 `handleSaveEdit`，增加空值检查：若用户清空输入框并失焦，则视为放弃修改，保留原默认名称（不调用更新接口）。

2.  `src/app/novels/[id]/page.tsx`:
    -   更新 `handleCreateVolume` 和 `handleCreateChapter` 方法，使其在完成 API 调用和本地状态更新后，返回新对象的 `{ id, title }`，以供子组件使用。

**验证方式与结果**:
-   **交互验证**: 
    1. 点击“新建卷” -> 列表出现“新建卷” -> 自动变成输入框且文本全选 -> 输入“第一卷” -> 回车 -> 保存成功。
    2. 点击“新建章节” -> 列表出现“新建章节” -> 自动变成输入框 -> 点击空白处 -> 输入框消失，保留“新建章节”。
    3. 点击“新建卷” -> 清空输入框 -> 点击空白处 -> 保留“新建卷”。

**用户体验提升**:
消除了创建后需要手动右键重命名的繁琐步骤，更加符合用户直觉。
