# 变更记录: 修复详情页正文预览与版本列表缺失问题

- **时间**: 2026-01-31 16:15
- **目标**: 
  1. 修复作品详情页中，选中章节后预览区域无法显示正文的问题。
  2. 修复版本历史列表中只显示当前版本，无法查看所有历史版本的问题。
  3. 支持在预览区域切换并查看不同版本的正文内容。
- **变更范围**:
  - `src/app/works/[id]/page.tsx`:
    - 新增 `useEffect` 监听 `selectedChapterId`，选中章节时自动调用 `getDocumentDetail` (获取正文) 和 `getDocumentVersions` (获取版本列表)。
    - 实现 `handleSelectVersion` 方法，支持点击版本列表项时动态获取并展示该版本的正文。
    - 将获取到的数据合并更新到 `volumes` 和 `orphanChapters` 状态中。
  - `src/components/work-detail/ChapterPreview.tsx`:
    - 新增 `onSelectVersion` 回调属性。
    - 在点击版本列表项时触发该回调，允许父组件处理版本切换逻辑。
- **验证方式**:
  - 正文显示：进入作品详情页，点击任意已有内容的章节，检查右侧预览区是否显示正文内容（不再一直显示“暂无内容”）。
  - 版本列表：点击右上角版本号展开下拉菜单，检查是否列出了所有历史版本。
  - 版本切换：点击下拉菜单中的历史版本，检查预览区内容是否更新为该对应版本的内容。
- **结果**:
  - 解决了用户反馈的“没有正文”和“版本列表缺失”问题，并额外完善了版本预览交互。
